# SPDK RAID模块开发任务

## 任务

在SPDK RAID0模块中实现IO性能统计功能。

**功能要求**：
1. 添加一个RPC命令`bdev_raid_get_io_stats`，用于查询指定RAID bdev的IO统计信息
2. 统计信息包括：
   - 总IO请求数
   - 跨条带边界的IO请求数量（原始用户请求跨条带边界的次数）
   - 跨条带边界IO的平均分割次数（一个跨条带的原始请求平均被分割成多少个子请求）
   - 所有IO请求的平均大小（blocks）
   - 最大IO请求大小（blocks）
   - 最小IO请求大小（blocks）

3. 统计需要在IO处理过程中实时更新，不能影响性能

**实现要求**：
- 在`module/bdev/raid/bdev_raid_rpc.c`中添加RPC方法
- 在RAID0的IO处理函数中添加统计逻辑
- 确保统计数据的准确性
- 考虑并发安全和性能影响

**关键要求**：
- "跨条带边界的IO请求数量"必须统计的是**原始用户提交的请求**，而不是到达RAID模块的请求
- "分割次数"必须准确反映一个原始请求被分割成了多少个子请求
- 统计逻辑必须准确，不能有遗漏或重复计数

## 评分标准

- **功能实现正确性**（40分）
- **统计准确性**（40分）：特别是跨条带边界统计和分割次数统计的准确性
- **代码质量和性能考虑**（20分）

## 提交要求

请提供：
1. 完整的实现代码
2. 数据结构设计说明
3. 统计逻辑的实现说明，包括：
   - 如何判断IO请求是否跨条带边界
   - 如何统计分割次数
   - 在代码的哪个位置进行统计，为什么选择这个位置
4. 测试结果和验证方法
5. 在实现过程中遇到的问题和解决方案

---

**注意**：本题是一个实际的开发任务，需要你通过阅读源代码来理解IO处理流程、数据结构设计、并发安全等，确保实现正确且高效。要准确实现跨条带边界统计和分割次数统计，你需要深入理解IO请求在系统中的完整处理流程。
